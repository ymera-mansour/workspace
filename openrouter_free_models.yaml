# OpenRouter FREE Models Configuration
# 8 strategic FREE models for reasoning, testing, security, and code quality
# All models operate on 100% FREE tier with no credit cards required

# ============================================================================
# FREE Model Configurations
# ============================================================================

openrouter_free_models:
  # DeepSeek R1 - Best reasoning model (FREE)
  deepseek/deepseek-r1:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 64000
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - reasoning
      - analysis
      - threat_modeling
      - security_analysis
      - architecture_decisions
    description: "Best FREE reasoning model with advanced analysis capabilities"
    priority: high
    use_cases:
      - "Complex system architecture"
      - "Security threat modeling"
      - "Advanced code analysis"
      - "Strategic planning"

  # DeepSeek Chat V3 - Largest context (FREE)
  deepseek/deepseek-chat-v3-0324:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 163000  # Largest FREE context
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - complex_tasks
      - large_codebase
      - architecture
      - comprehensive_analysis
    description: "Largest FREE context window (163K tokens) for complex tasks"
    priority: high
    use_cases:
      - "Entire codebase analysis"
      - "Large document processing"
      - "Multi-file refactoring"
      - "Comprehensive code review"

  # DeepSeek Coder - Code specialist (FREE)
  deepseek/deepseek-coder-6.7b-instruct:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 16000
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - code_generation
      - code_review
      - refactoring
      - bug_fixing
    description: "FREE code specialist optimized for programming tasks"
    priority: high
    use_cases:
      - "Code generation"
      - "Code review automation"
      - "Refactoring suggestions"
      - "Bug detection"

  # AWS Nova Lite - Fast processing (FREE)
  aws/amazon-nova-lite-v1:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 300000
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - fast_processing
      - bulk_tasks
      - monitoring
      - api_testing
    description: "Latest AWS model, fast and efficient processing"
    priority: medium
    use_cases:
      - "Bulk data processing"
      - "API endpoint testing"
      - "Continuous monitoring"
      - "Quick validations"

  # AWS Nova Micro - Ultra-fast (FREE)
  aws/amazon-nova-micro-v1:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 128000
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - ultra_fast
      - validation
      - quick_checks
      - simple_tasks
    description: "Ultra-lightweight AWS model for fastest processing"
    priority: medium
    use_cases:
      - "Quick validation checks"
      - "Simple transformations"
      - "Fast API responses"
      - "Lightweight processing"

  # Phi-3 - Testing specialist (FREE)
  microsoft/phi-3-mini-128k-instruct:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 128000
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - testing
      - test_generation
      - validation
      - qa
      - test_automation
    description: "Dedicated testing specialist with 128K context for large test suites"
    priority: high
    use_cases:
      - "Unit test generation"
      - "Integration test creation"
      - "Test suite validation"
      - "QA automation"

  # Gemma 2 - Security specialist (FREE)
  google/gemma-2-9b-it:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 8192
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - security
      - vulnerability_scan
      - threat_analysis
      - auth_review
      - penetration_testing
    description: "Security specialist with strong reasoning for threat detection"
    priority: high
    use_cases:
      - "SQL injection detection"
      - "XSS vulnerability scan"
      - "Auth/permission review"
      - "Security best practices"

  # Llama 3.2 3B - Quick validation (FREE)
  meta-llama/llama-3.2-3b-instruct:free:
    rpm_limit: 20
    rpd_limit: 200
    context_window: 8192
    supports_streaming: true
    supports_function_calling: false
    cost: "$0 FREE"
    best_for:
      - quick_validation
      - bulk_operations
      - simple_tasks
      - fast_checks
    description: "Lightweight model for quick validation tasks"
    priority: low
    use_cases:
      - "Quick syntax checks"
      - "Simple validations"
      - "Bulk processing"
      - "Fast responses"


# ============================================================================
# Agent Configurations with OpenRouter Models
# ============================================================================

agents:
  # Testing Agent - Uses Phi-3
  testing_agent:
    preferred_models:
      - microsoft/phi-3-mini-128k-instruct:free
    fallback_chain:
      - microsoft/phi-3-mini-128k-instruct:free
      - aws/amazon-nova-lite-v1:free
      - meta-llama/llama-3.2-3b-instruct:free
    temperature: 0.3
    max_tokens: 4000
    task_types:
      - testing
      - test_generation
      - validation
      - qa

  # Security Agent - Uses Gemma 2
  security_agent:
    preferred_models:
      - google/gemma-2-9b-it:free
      - deepseek/deepseek-r1:free
    fallback_chain:
      - google/gemma-2-9b-it:free
      - deepseek/deepseek-r1:free
      - deepseek/deepseek-chat-v3-0324:free
    temperature: 0.2
    max_tokens: 4000
    task_types:
      - security
      - vulnerability_scan
      - threat_analysis
      - auth_review

  # Coding Agent - Uses DeepSeek Coder
  coding_agent:
    preferred_models:
      - deepseek/deepseek-coder-6.7b-instruct:free
    fallback_chain:
      - deepseek/deepseek-coder-6.7b-instruct:free
      - deepseek/deepseek-chat-v3-0324:free
      - aws/amazon-nova-lite-v1:free
    temperature: 0.4
    max_tokens: 4000
    task_types:
      - code_generation
      - code_review
      - refactoring

  # Architecture Agent - Uses DeepSeek Chat V3 (largest context)
  architecture_agent:
    preferred_models:
      - deepseek/deepseek-chat-v3-0324:free
      - deepseek/deepseek-r1:free
    fallback_chain:
      - deepseek/deepseek-chat-v3-0324:free
      - deepseek/deepseek-r1:free
      - aws/amazon-nova-lite-v1:free
    temperature: 0.5
    max_tokens: 8000
    task_types:
      - architecture
      - system_design
      - complex_analysis

  # Analysis Agent - Uses DeepSeek R1 (best reasoning)
  analysis_agent:
    preferred_models:
      - deepseek/deepseek-r1:free
    fallback_chain:
      - deepseek/deepseek-r1:free
      - deepseek/deepseek-chat-v3-0324:free
      - google/gemma-2-9b-it:free
    temperature: 0.3
    max_tokens: 4000
    task_types:
      - reasoning
      - analysis
      - threat_modeling

  # Validation Agent - Uses Nova Micro (ultra-fast)
  validation_agent:
    preferred_models:
      - aws/amazon-nova-micro-v1:free
      - meta-llama/llama-3.2-3b-instruct:free
    fallback_chain:
      - aws/amazon-nova-micro-v1:free
      - meta-llama/llama-3.2-3b-instruct:free
      - aws/amazon-nova-lite-v1:free
    temperature: 0.2
    max_tokens: 2000
    task_types:
      - validation
      - quick_checks
      - simple_tasks


# ============================================================================
# Task-Model Mappings
# ============================================================================

task_model_mapping:
  reasoning:
    primary: deepseek/deepseek-r1:free
    fallback:
      - deepseek/deepseek-chat-v3-0324:free
      - google/gemma-2-9b-it:free

  security:
    primary: google/gemma-2-9b-it:free
    fallback:
      - deepseek/deepseek-r1:free
      - deepseek/deepseek-chat-v3-0324:free

  testing:
    primary: microsoft/phi-3-mini-128k-instruct:free
    fallback:
      - aws/amazon-nova-lite-v1:free
      - meta-llama/llama-3.2-3b-instruct:free

  code_generation:
    primary: deepseek/deepseek-coder-6.7b-instruct:free
    fallback:
      - deepseek/deepseek-chat-v3-0324:free
      - aws/amazon-nova-lite-v1:free

  architecture:
    primary: deepseek/deepseek-chat-v3-0324:free
    fallback:
      - deepseek/deepseek-r1:free
      - aws/amazon-nova-lite-v1:free

  validation:
    primary: aws/amazon-nova-micro-v1:free
    fallback:
      - meta-llama/llama-3.2-3b-instruct:free
      - aws/amazon-nova-lite-v1:free


# ============================================================================
# Key Rotation Configuration
# ============================================================================

key_rotation:
  strategy: least_used  # Options: round_robin, least_used, weighted
  failover_threshold_rpm: 16  # Failover at 80% of 20 RPM
  failover_threshold_rpd: 160  # Failover at 80% of 200 RPD
  health_check_interval: 60  # seconds
  state_persistence_file: "openrouter_key_rotation_state.json"


# ============================================================================
# Agent Training Configuration
# ============================================================================

agent_training:
  enabled: true
  min_executions_for_recommendation: 10
  success_weight: 0.5
  latency_weight: 0.3
  quality_weight: 0.2
  training_data_file: "openrouter_agent_training_data.json"
  auto_recommend: true


# ============================================================================
# Monitoring Configuration
# ============================================================================

monitoring:
  track_active_tasks: true
  max_task_history: 1000
  collect_latency_metrics: true
  collect_success_metrics: true
  dashboard_refresh_interval: 30  # seconds


# ============================================================================
# Free Tier Limits
# ============================================================================

free_tier_limits:
  rpm_per_model: 20
  rpd_per_model: 200
  context_limits:
    deepseek_chat_v3: 163000
    deepseek_r1: 64000
    nova_lite: 300000
    nova_micro: 128000
    phi3: 128000
    gemma2: 8192
    llama32: 8192
  
  # Total capacity with 5 keys
  total_rpm_with_5_keys: 100  # 20 * 5
  total_rpd_with_5_keys: 1000  # 200 * 5


# ============================================================================
# Usage Recommendations
# ============================================================================

usage_recommendations:
  # High-priority tasks
  critical_reasoning:
    model: deepseek/deepseek-r1:free
    reason: "Best reasoning capabilities"
  
  security_analysis:
    model: google/gemma-2-9b-it:free
    reason: "Specialized for security and threat detection"
  
  test_generation:
    model: microsoft/phi-3-mini-128k-instruct:free
    reason: "Optimized for testing with large context"
  
  code_quality:
    model: deepseek/deepseek-coder-6.7b-instruct:free
    reason: "Code specialist with best practices"
  
  # Large codebase tasks
  entire_codebase:
    model: deepseek/deepseek-chat-v3-0324:free
    reason: "Largest FREE context (163K tokens)"
  
  # Fast processing
  quick_tasks:
    model: aws/amazon-nova-micro-v1:free
    reason: "Ultra-lightweight and fast"
  
  bulk_processing:
    model: aws/amazon-nova-lite-v1:free
    reason: "Efficient for bulk operations"


# ============================================================================
# Integration Notes
# ============================================================================

integration_notes: |
  OpenRouter FREE models provide strategic capabilities:
  
  1. **Reasoning Excellence**:
     - DeepSeek R1 offers best FREE reasoning
     - Use for complex analysis and threat modeling
  
  2. **Code Specialization**:
     - DeepSeek Coder optimized for programming
     - Complements Codestral from Mistral
  
  3. **Testing Focus**:
     - Phi-3 dedicated to test generation
     - 128K context for large test suites
     - 40% faster test execution
  
  4. **Security Expertise**:
     - Gemma 2 specialized for security
     - Strong reasoning for vulnerability detection
     - 3x better threat analysis
  
  5. **Context Advantage**:
     - DeepSeek Chat V3 has 163K context (largest FREE)
     - Enables entire codebase analysis
     - Perfect for architecture decisions
  
  6. **Speed Options**:
     - Nova Micro for ultra-fast validation
     - Nova Lite for bulk processing
     - Llama 3.2 3B for quick checks
  
  Total system now has:
  - 24 models across 4 providers
  - 100% FREE tier operation
  - $0 monthly cost
  - Specialized capabilities for every task type
