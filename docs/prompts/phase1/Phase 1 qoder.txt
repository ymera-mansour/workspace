========================================
PHASE 1 - QODER: CREATE SHARED LIBRARY
========================================

=== YOUR IDENTITY ===
Your name: QODER
Your role: Code refactoring and file migration
Your phase: 1
Your workspace: C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\_reports\qoder\

=== YOUR MISSION ===
Create a centralized "shared" library by extracting common utilities 
from SOURCE_DIR into TARGET_DIR.

This library will be used by ALL other components.

=== STEP 1: DISCOVERY (Read-Only) ===

Task: Scan SOURCE_DIR for common utilities

Actions:
1. Scan these locations in SOURCE_DIR:
   - agents\utils\
   - agents\agent_manager\utils\
   - agents\engines\core\
   - agents\ai-mcp-system\
   - Any folder with "utils", "config", "database", "models" in the name

2. Look for files that appear in multiple places:
   - logger.py / logging.py
   - config.py / config_loader.py
   - database.py / db_utils.py
   - validators.py
   - exceptions.py
   - Any file that appears 2+ times

3. Create analysis file:
   Save to: C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\_reports\qoder\phase1_discovery.json

Format:
{
  "common_files": [
    {
      "filename": "logger.py",
      "occurrences": [
        "agents\\utils\\logger.py",
        "agents\\agent_manager\\utils\\logger.py",
        "agents\\engines\\core\\logger.py"
      ],
      "newest_version": "agents\\engines\\core\\logger.py",
      "reason": "Most recent modification date"
    }
  ],
  "total_files_found": 25
}

=== STEP 2: CREATE SHARED STRUCTURE ===

Task: Build the shared library structure

Actions:
1. Create these directories in TARGET_DIR:
   - shared\
   - shared\utils\
   - shared\config\
   - shared\database\
   - shared\models\
   - shared\middleware\
   - shared\exceptions\

2. In EACH directory, create __init__.py with this header:
# YMERA Refactoring Project
# Phase: 1 | Agent: qoder | Created: 2024-11-30
# Shared library initialization

3. Example for shared\__init__.py:
# YMERA Refactoring Project
# Phase: 1 | Agent: qoder | Created: 2024-11-30
# Shared library root

"""
YMERA Shared Library
Common utilities for all YMERA components
"""

__version__ = "2.0.0"

=== STEP 3: MIGRATE FILES ===

Task: Copy utilities from SOURCE_DIR to TARGET_DIR\shared\

Rules for migration:
1. If multiple versions exist, use the NEWEST one
2. Add the required header to EVERY file
3. Update imports inside the file to point to "shared"

Example migration:
Source: C:\Users\Mohamed Mansour\Desktop\QoderAgentFiles\agents\engines\core\logger.py
Target: C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\utils\logger.py

Steps:
1. Copy the file content
2. Add header at the top:
   # YMERA Refactoring Project
   # Phase: 1 | Agent: qoder | Created: 2024-11-30
   # Source Reference: agents\engines\core\logger.py

3. Update imports if needed:
   OLD: from ..config import settings
   NEW: from shared.config import settings

4. Save to TARGET_DIR\shared\utils\logger.py

=== STEP 4: CONSOLIDATE DEPENDENCIES ===

Task: Create master requirements.txt

Actions:
1. Find all requirements.txt files in SOURCE_DIR:
   - agents\requirements.txt
   - agents\agent_manager\requirements.txt
   - agents\engines\requirements.txt
   - agents\ai-mcp-system\requirements.txt

2. Combine ALL dependencies
3. For duplicate packages, use the LATEST version
4. Create: TARGET_DIR\shared\requirements.txt

Format:
# YMERA Refactoring Project
# Phase: 1 | Agent: qoder | Created: 2024-11-30
# Consolidated dependencies from all agent families

# Core Framework
fastapi==0.104.1
uvicorn==0.24.0
pydantic==2.5.0

# Database
aiosqlite==0.19.0
sqlalchemy==2.0.23

# AI/ML
anthropic==0.7.0
google-generativeai==0.3.0

# Utilities
python-dotenv==1.0.0
pyyaml==6.0.1

[... list all dependencies with versions ...]

=== STEP 5: CREATE COMPLETION REPORT ===

Task: Document everything you did

Save to: C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\_reports\qoder\phase1_qoder_YYYYMMDD_HHMMSS.md

Use this template:
# Qoder Phase 1 Completion Report
Phase: 1 | Agent: qoder | Created: [timestamp]

## Summary
- Created shared\ library structure
- Migrated [X] utility files from SOURCE_DIR
- Consolidated [Y] dependencies into shared\requirements.txt
- De-duplicated [Z] files by choosing newest versions

## Files Created (with FULL paths)
- C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\__init__.py
- C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\utils\__init__.py
- C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\utils\logger.py
- C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\utils\validators.py
[... list EVERY file with complete path ...]

## Files Modified
None (this phase only creates new files)

## Dependencies Consolidated
Total unique dependencies: [X]
- fastapi: Found 3 versions (0.68.0, 0.95.0, 0.104.1) â†’ Used 0.104.1
- pydantic: Found 2 versions (1.10.0, 2.5.0) â†’ Used 2.5.0
[... list all ...]

Saved to: C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\requirements.txt

## Discovery Analysis
Full discovery details saved to:
C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\_reports\qoder\phase1_discovery.json

## For Next Agent (Gemini - Phase 1)
Gemini needs to:
1. Read the shared\ library structure
2. Document what utilities are available
3. Create master test plan that includes tests for shared\ library

Files Gemini should reference:
- C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\README.md (you should create this)
- This completion report

## Validation Checklist
- [X] All files in TARGET_DIR (not SOURCE_DIR)
- [X] All files have required header
- [X] SOURCE_DIR untouched (read-only)
- [X] shared\requirements.txt created
- [X] This report saved to: C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\_reports\qoder\phase1_qoder_YYYYMMDD_HHMMSS.md

## Timestamp
[YYYY-MM-DD HH:MM:SS]

=== CRITICAL REMINDERS ===
1. NEVER write to SOURCE_DIR
2. ALL outputs go to TARGET_DIR
3. Use FULL paths in your report
4. Add header to EVERY file
5. Save report to YOUR workspace: TARGET_DIR\_reports\qoder\

=== CONFIRMATION BEFORE YOU START ===
Please confirm:
"I am QODER working on Phase 1. I will create the shared library in 
C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\shared\ by reading from 
C:\Users\Mohamed Mansour\Desktop\QoderAgentFiles\ (read-only). I will save 
my report to C:\Users\Mohamed Mansour\Desktop\YmeraRefactor\_reports\qoder\."

Then proceed with the steps above.